<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Perfil do Aluno - Instituto Buriti</title>

  <!-- CSS (caminhos absolutos) -->
  <link rel="stylesheet" href="/css/style.css"/>
  <link rel="stylesheet" href="/css/dashboard.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- Anti-flash enquanto checa autenticação -->
  <style>html[data-auth="checking"] body.dashboard-body{visibility:hidden;}</style>

  <!-- Núcleo de autenticação + guard compartilhado -->
  <script src="/js/auth.js" defer></script>
  <script src="/js/dashboard-auth.js" defer></script>
  <script>
    // Sinaliza checagem de auth; dashboard-auth.js vai validar role=aluno
    document.documentElement.setAttribute('data-auth','checking');
  </script>
</head>

<!-- Papel esperado: aluno -->
<body class="dashboard-body" data-dashboard-role="aluno">
  <!-- Header -->
  <header class="header">
    <nav class="nav" aria-label="principal">
      <div class="nav-item"><a href="/index.html">Home</a></div>
      <div class="nav-item"><a href="/pages/quem-somos.html">Quem Somos</a></div>
      <div class="nav-item"><a href="/pages/cursos.html">Cursos</a></div>
      <div class="nav-item"><a href="/pages/seja-instrutor-novo.html">Seja um Instrutor</a></div>
      <div class="nav-item"><a href="/pages/contato.html">Contato</a></div>

      <div class="nav-item login-dropdown">
        <!-- Hidratação global por dashboard-auth.js -->
        <button class="login-btn user-name" type="button"
                aria-haspopup="menu" aria-expanded="false" aria-controls="user-menu"
                data-user-name data-static="false">Minha conta</button>
        <div class="dropdown-menu" role="menu" id="user-menu">
          <a href="/pages/dashboard-aluno.html" class="dropdown-item">Dashboard</a>
          <a href="/pages/perfil-aluno.html" class="dropdown-item active" aria-current="page">Perfil</a>
          <a href="#logout" class="dropdown-item" data-action="logout">Sair</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Dashboard Container -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" aria-label="menu lateral">
      <div class="sidebar-header">
        <div class="user-info">
          <div class="user-avatar"><i class="fas fa-user-graduate" aria-hidden="true"></i></div>
          <div class="user-details">
            <h3 class="user-name" data-user-name data-static="false">Aluno(a)</h3>
            <p class="user-role" data-user-role data-static="false">Aluno</p>
          </div>
        </div>
        <button class="sidebar-toggle" id="sidebarToggle" type="button"
                aria-label="Recolher menu" aria-controls="sidebar" aria-expanded="true">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
      </div>

      <nav class="sidebar-nav">
        <a href="/pages/dashboard-aluno.html" class="nav-link">
          <i class="fas fa-home" aria-hidden="true"></i><span>Visão Geral</span>
        </a>
        <a href="/pages/perfil-aluno.html" class="nav-link active" aria-current="page">
          <i class="fas fa-user" aria-hidden="true"></i><span>Meu Perfil</span>
        </a>
        <a href="#courses" class="nav-link" data-section="courses">
          <i class="fas fa-book" aria-hidden="true"></i><span>Meus Cursos</span>
        </a>
        <a href="#deadlines" class="nav-link" data-section="deadlines">
          <i class="fas fa-clock" aria-hidden="true"></i><span>Próximos Prazos</span>
        </a>
        <a href="#live-classes" class="nav-link" data-section="live-classes">
          <i class="fas fa-video" aria-hidden="true"></i><span>Aulas ao Vivo</span>
        </a>
        <a href="#assignments" class="nav-link" data-section="assignments">
          <i class="fas fa-tasks" aria-hidden="true"></i><span>Atividades</span>
        </a>
        <a href="#materials" class="nav-link" data-section="materials">
          <i class="fas fa-folder" aria-hidden="true"></i><span>Materiais</span>
        </a>
        <a href="#messages" class="nav-link" data-section="messages">
          <i class="fas fa-envelope" aria-hidden="true"></i><span>Mensagens</span>
        </a>
        <a href="#performance" class="nav-link" data-section="performance">
          <i class="fas fa-chart-line" aria-hidden="true"></i><span>Performance</span>
        </a>
        <a href="#settings" class="nav-link" data-section="settings">
          <i class="fas fa-cog" aria-hidden="true"></i><span>Configurações</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Profile Section -->
      <section id="profile" class="dashboard-section active" aria-labelledby="profile-title">
        <div class="section-header">
          <h1 id="profile-title">Meu Perfil</h1>
          <p>Gerencie suas informações pessoais e configurações de conta</p>
        </div>

        <!-- Profile Info Card -->
        <div class="dashboard-card profile-card">
            <div class="card-header">
                <h3><i class="fas fa-user" aria-hidden="true"></i> Informações Pessoais</h3>
                <button class="btn-secondary" id="edit-profile-btn" type="button">
                    <i class="fas fa-edit" aria-hidden="true"></i> Editar Perfil
                </button>
            </div>
            <div class="card-content">
                <div class="profile-info-grid">
                    <!-- Profile Avatar -->
                    <div class="profile-avatar-section">
                        <div class="profile-avatar-large">
                            <i class="fas fa-user-graduate" aria-hidden="true"></i>
                        </div>
                        <button class="btn-secondary btn-small" id="change-avatar-btn" type="button">
                            <i class="fas fa-camera" aria-hidden="true"></i> Alterar Foto
                        </button>
                    </div>
                    <!-- Profile Details -->
                    <div class="profile-details">
                        <div class="profile-field">
                            <label>Nome Completo</label>
                            <div class="field-value" id="display-name">Ana Silva</div>
                            <input type="text" class="field-input" id="input-name" value="Ana Silva" style="display: none;">
                        </div>
                        <div class="profile-field">
                            <label>E-mail</label>
                            <div class="field-value" id="display-email">ana.silva@email.com</div>
                            <input type="email" class="field-input" id="input-email" value="ana.silva@email.com" style="display: none;">
                        </div>
                        <div class="profile-field">
                            <label>Telefone</label>
                            <div class="field-value" id="display-phone">(11) 99999-9999</div>
                            <input type="tel" class="field-input" id="input-phone" value="(11) 99999-9999" style="display: none;">
                        </div>
                        <div class="profile-field">
                            <label>Data de Nascimento</label>
                            <div class="field-value" id="display-birthdate">15/03/1995</div>
                            <input type="date" class="field-input" id="input-birthdate" value="1995-03-15" style="display: none;">
                        </div>
                        <div class="profile-field">
                            <label>Cidade</label>
                            <div class="field-value" id="display-city">São Paulo, SP</div>
                            <input type="text" class="field-input" id="input-city" value="São Paulo, SP" style="display: none;">
                        </div>
                        <div class="profile-field">
                            <label>Profissão</label>
                            <div class="field-value" id="display-profession">Desenvolvedora Web</div>
                            <input type="text" class="field-input" id="input-profession" value="Desenvolvedora Web" style="display: none;">
                        </div>
                    </div>
                </div>
                <!-- Edit Mode Buttons -->
                <div class="profile-actions" id="profile-actions" style="display: none;">
                    <button class="btn-primary" id="save-profile-btn" type="button">
                        <i class="fas fa-save" aria-hidden="true"></i> Salvar Alterações
                    </button>
                    <button class="btn-secondary" id="cancel-edit-btn" type="button">
                        <i class="fas fa-times" aria-hidden="true"></i> Cancelar
                    </button>
                </div>
            </div>
        </div>
        <!-- Account Statistics -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3><i class="fas fa-chart-bar" aria-hidden="true"></i> Estatísticas da Conta</h3>
            </div>
            <div class="card-content">
                <div class="stats-grid">
                    <div class="stat-card" role="status">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check" aria-hidden="true"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="member-since">Março 2024</h3>
                            <p>Membro desde</p>
                        </div>
                    </div>
                    <div class="stat-card" role="status">
                        <div class="stat-icon">
                            <i class="fas fa-book" aria-hidden="true"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-courses">2</h3>
                            <p>Cursos Matriculados</p>
                        </div>
                    </div>
                    <div class="stat-card" role="status">
                        <div class="stat-icon">
                            <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="completed-courses">0</h3>
                            <p>Cursos Concluídos</p>
                        </div>
                    </div>
                    <div class="stat-card" role="status">
                        <div class="stat-icon">
                            <i class="fas fa-trophy" aria-hidden="true"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-achievements">3</h3>
                            <p>Conquistas</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Security Settings -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3><i class="fas fa-shield-alt" aria-hidden="true"></i> Segurança da Conta</h3>
            </div>
            <div class="card-content">
                <div class="security-options">
                    <div class="security-item">
                        <div class="security-info">
                            <h4>Alterar Senha</h4>
                            <p>Mantenha sua conta segura alterando sua senha regularmente</p>
                        </div>
                        <button class="btn-secondary" id="change-password-btn" type="button">
                            <i class="fas fa-key" aria-hidden="true"></i> Alterar Senha
                        </button>
                    </div>
                    <div class="security-item">
                        <div class="security-info">
                            <h4>Último Acesso</h4>
                            <p id="last-login">Hoje às 14:30 - São Paulo, SP</p>
                        </div>
                        <span class="status-badge success">Ativo</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Preferences -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3><i class="fas fa-cog" aria-hidden="true"></i> Preferências</h3>
            </div>
            <div class="card-content">
                <div class="preferences-grid">
                    <div class="preference-item">
                        <div class="preference-info">
                            <h4>Notificações por E-mail</h4>
                            <p>Receber atualizações sobre cursos e atividades</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="email-notifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="preference-item">
                        <div class="preference-info">
                            <h4>Notificações Push</h4>
                            <p>Receber notificações no navegador</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="push-notifications">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="preference-item">
                        <div class="preference-info">
                            <h4>Modo Escuro</h4>
                            <p>Alternar entre tema claro e escuro</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dark-mode">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

      </section>
    </main>
  </div>

  <!-- Message Container -->
  <div id="message-container" class="message-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Footer (padronizado) -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="/images/LogomarcaInstitutoBuriti.png" alt="Instituto Buriti" class="footer-logo" loading="lazy" decoding="async"/>
          <h3>Educação que transforma. Cultura que conecta.</h3>
          <p>Instituto Buriti, uma empresa 100% digital.</p>
        </div>
        <div class="footer-links">
          <div class="footer-column">
            <h4>Links Rápidos</h4>
            <ul>
              <li><a href="/index.html">Home</a></li>
              <li><a href="/pages/quem-somos.html">Quem Somos</a></li>
              <li><a href="/pages/cursos.html">Cursos</a></li>
              <li><a href="/pages/seja-instrutor-novo.html">Seja um Instrutor</a></li>
              <li><a href="/pages/contato.html">Contato</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Contato</h4>
            <ul>
              <li>📧 contato@institutoburiti.com.br</li>
              <li>📞 (86) 98170-8388</li>
              <li>📍 Teresina, Piauí</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-bottom"><p>&copy; 2024 Instituto Buriti. Todos os direitos reservados.</p></div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="/js/dashboard.js" defer></script>
  <script src="/js/perfil.js" defer></script>
  <script>
    window.addEventListener('dashboard-auth:ready', () => {
      document.documentElement.removeAttribute('data-auth');
    }, { once: true });
    setTimeout(() => {
      if (document.documentElement.getAttribute('data-auth') === 'checking') {
        document.documentElement.removeAttribute('data-auth');
      }
    }, 2000);
    document.addEventListener('DOMContentLoaded', () => {
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebarToggle');
      sidebarToggle?.addEventListener('click', () => {
        sidebar?.classList.toggle('collapsed');
        const isCollapsed = sidebar?.classList.contains('collapsed');
        sidebarToggle.setAttribute('aria-expanded', isCollapsed ? 'false' : 'true');
        sidebarToggle.setAttribute('aria-label', isCollapsed ? 'Expandir menu' : 'Recolher menu');
      });
    });
  </script>
</body>
</html>
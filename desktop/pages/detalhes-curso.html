<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title id="courseTitle">Detalhes do Curso - Instituto Buriti</title>

  <!-- CSS base e espec√≠ficos -->
  <link rel="stylesheet" href="/desktop/css/style.css"/>
  <link rel="stylesheet" href="/desktop/css/curso.css"/>
  <link rel="stylesheet" href="/desktop/css/footer-oficial.css"/>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav">
      <div class="nav-item"><a href="/desktop/index.html">Home</a></div>
      <div class="nav-item"><a href="/desktop/pages/quem-somos.html">Quem Somos</a></div>
      <div class="nav-item active"><a href="/desktop/pages/cursos.html">Cursos</a></div>
      <div class="nav-item"><a href="/desktop/pages/seja-instrutor-novo.html">Seja um Instrutor</a></div>
      <div class="nav-item"><a href="/desktop/pages/contato.html">Contato</a></div>
      <div class="nav-item login-dropdown">
        <button class="login-btn">Login</button>
        <div class="dropdown-menu">
          <a href="/desktop/pages/login-aluno.html" class="dropdown-item">Aluno</a>
          <a href="/desktop/pages/login-instrutor.html" class="dropdown-item">Instrutor</a>
          <a href="/desktop/pages/login-admin.html" class="dropdown-item">Administrador</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <!-- Hero -->
    <section class="course-hero-section">
      <div class="container">
        <div class="course-hero-content">
          <div class="course-hero-text">
            <h1 class="course-hero-title" id="courseHeroTitle"></h1>
            <p class="course-hero-subtitle" id="courseHeroSubtitle"></p>
            <div class="course-meta-info">
              <span id="courseCategory" class="course-meta-badge"></span>
              <span id="courseLevel" class="course-meta-badge"></span>
              <span id="courseDuration" class="course-meta-badge"></span>
            </div>
            <div class="course-instructor-info">
              <img id="instructorAvatar" class="instructor-avatar" alt="Instrutor"
                   src="/desktop/images/instructor-placeholder.jpg"
                   onerror="this.onerror=null;this.src='/desktop/images/ChatGPT Image 6 de ago. de 2025, 23_37_06.png';">
              <span id="instructorName"></span>
            </div>
          </div>

          <aside class="course-sidebar">
            <img id="courseSidebarImage" class="course-sidebar-image" alt="Capa do Curso"
                 src="/desktop/images/course-placeholder.jpg"
                 onerror="this.onerror=null;this.src='/desktop/images/ChatGPT Image 6 de ago. de 2025, 23_37_06.png';">
            <div class="course-sidebar-details">
              <div class="course-price" id="coursePrice"></div>
              <button class="buy-button">Inscrever-se Agora</button>
              <button class="wishlist-button"><i class="far fa-heart"></i> Adicionar √† Lista de Desejos</button>
              <div class="included-features">
                <h4>O que est√° inclu√≠do:</h4>
                <ul>
                  <li><i class="fas fa-video"></i> Aulas em v√≠deo sob demanda</li>
                  <li><i class="fas fa-file-alt"></i> Recursos para download</li>
                  <li><i class="fas fa-infinity"></i> Acesso vital√≠cio</li>
                  <li><i class="fas fa-mobile-alt"></i> Acesso no celular e TV</li>
                  <li><i class="fas fa-certificate"></i> Certificado de conclus√£o</li>
                </ul>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- Detalhes / abas -->
    <section class="course-details-section">
      <div class="container">
        <div class="course-tabs">
          <button class="tab-button active" data-tab="description">Descri√ß√£o</button>
          <button class="tab-button" data-tab="content">Conte√∫do</button>
          <button class="tab-button" data-tab="instructor">Instrutor</button>
          <button class="tab-button" data-tab="reviews">Avalia√ß√µes</button>
        </div>

        <div class="tab-content-wrapper">
          <div id="tab-description" class="tab-content active">
            <h3>Sobre este curso</h3>
            <p id="courseDescriptionFull"></p>
          </div>

          <div id="tab-content" class="tab-content">
            <h3>Conte√∫do do Curso</h3>
            <ul id="courseContentList"></ul>
          </div>

          <div id="tab-instructor" class="tab-content">
            <h3>Sobre o Instrutor</h3>
            <div class="instructor-profile">
              <img id="instructorProfileAvatar" class="instructor-profile-avatar" alt="Instrutor"
                   src="/desktop/images/instructor-placeholder.jpg"
                   onerror="this.onerror=null;this.src='/desktop/images/ChatGPT Image 6 de ago. de 2025, 23_37_06.png';">
              <h4 id="instructorProfileName"></h4>
              <p id="instructorProfileBio"></p>
            </div>
          </div>

          <div id="tab-reviews" class="tab-content">
            <h3>Avalia√ß√µes dos Alunos</h3>
            <div id="courseReviews">Nenhuma avalia√ß√£o ainda.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="/desktop/images/LogomarcaInstitutoBuriti.png" alt="Instituto Buriti" class="footer-logo">
          <h3>Educa√ß√£o que transforma. Cultura que conecta.</h3>
          <p>Instituto Buriti, uma empresa 100% digital.</p>
        </div>
        <div class="footer-links">
          <div class="footer-column">
            <h4>Links R√°pidos</h4>
            <ul>
              <li><a href="/desktop/index.html">Home</a></li>
              <li><a href="/desktop/pages/quem-somos.html">Quem Somos</a></li>
              <li><a href="/desktop/pages/cursos.html">Cursos</a></li>
              <li><a href="/desktop/pages/seja-instrutor-novo.html">Seja um Instrutor</a></li>
              <li><a href="/desktop/pages/contato.html">Contato</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Contato</h4>
            <ul>
              <li>üìß contato@institutoburiti.com.br</li>
              <li>üìû (86) 98170-8388</li>
              <li>üìç Teresina, Piau√≠</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 Instituto Buriti. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="/desktop/js/main.js"></script>
  <script src="/desktop/js/biblioteca.js?v=detalhes-2025-08-11-1"></script>
  <script>
    (function () {
      const DEFAULT_IMG = "/desktop/images/ChatGPT Image 6 de ago. de 2025, 23_37_06.png";

      // Mesmo conjunto da p√°gina de cursos (garante funcionamento isolado)
      const SAMPLES = [
        { id:"ia-fundamentos", title:"Fundamentos de IA", categoria:"tecnologia", nivel:"iniciante", tipos:["pago","certificado"], cargaHoraria:20, createdAt:"2025-07-20", acessos:124, description:"Conceitos b√°sicos de IA e ML com exerc√≠cios pr√°ticos.", thumbnail:"/desktop/images/cursos/ia-fundamentos.jpg", slug:"ia-fundamentos" },
        { id:"python-dados", title:"Python para Dados", categoria:"tecnologia", nivel:"intermediario", tipos:["pago"], cargaHoraria:28, createdAt:"2025-07-28", acessos:96, description:"Do pandas ao gr√°fico: an√°lise de dados aplicada.", thumbnail:DEFAULT_IMG, slug:"python-para-dados" },
        { id:"gestao-projetos", title:"Gest√£o de Projetos √Ågeis", categoria:"gestao", nivel:"intermediario", tipos:["pago","certificado"], cargaHoraria:18, createdAt:"2025-08-02", acessos:210, description:"Scrum e Kanban na pr√°tica com estudos de caso.", thumbnail:"/desktop/images/cursos/gestao-agil.jpg", slug:"gestao-de-projetos-ageis" },
        { id:"financas-basicas", title:"Finan√ßas Pessoais Essenciais", categoria:"gestao", nivel:"iniciante", tipos:["gratuito"], cargaHoraria:8, createdAt:"2025-07-15", acessos:330, description:"Controle de gastos, reserva de emerg√™ncia e metas.", thumbnail:DEFAULT_IMG, slug:"financas-pessoais-essenciais" },
        { id:"producao-cultural", title:"Produ√ß√£o Cultural", categoria:"cultura", nivel:"intermediario", tipos:["pago"], cargaHoraria:16, createdAt:"2025-07-10", acessos:78, description:"Do edital √† execu√ß√£o: projetos culturais sustent√°veis.", thumbnail:"/desktop/images/cursos/producao-cultural.jpg", slug:"producao-cultural" },
        { id:"educacao-inclusiva", title:"Educa√ß√£o Inclusiva na Pr√°tica", categoria:"educacao", nivel:"avancado", tipos:["pago","certificado"], cargaHoraria:32, createdAt:"2025-06-30", acessos:142, description:"Estrat√©gias e recursos para acessibilidade efetiva.", thumbnail:DEFAULT_IMG, slug:"educacao-inclusiva" },
        { id:"metodologias-ativas", title:"Metodologias Ativas", categoria:"educacao", nivel:"iniciante", tipos:["gratuito"], cargaHoraria:6, createdAt:"2025-08-05", acessos:52, description:"PBL, sala invertida e avalia√ß√£o formativa.", thumbnail:"/desktop/images/cursos/metodologias-ativas.jpg", slug:"metodologias-ativas" },
        { id:"empreendedorismo-social", title:"Empreendedorismo Social", categoria:"outros", nivel:"intermediario", tipos:["pago"], cargaHoraria:14, createdAt:"2025-07-25", acessos:67, description:"Modelos de neg√≥cio de impacto e medi√ß√£o de resultados.", thumbnail:DEFAULT_IMG, slug:"empreendedorismo-social" }
      ];

      function text(el, v){ const e=document.getElementById(el); if(e) e.textContent=v||""; }
      function img(el, src){
        const e=document.getElementById(el);
        if(!e) return;
        e.src = src && String(src).trim() ? src : DEFAULT_IMG;
        e.onerror = () => { e.onerror=null; e.src = DEFAULT_IMG; };
      }

      document.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        const slug = urlParams.get("slug");

        // Ordem de busca dos dados
        let courses = [];
        try {
          if (window.bibliotecaManager && typeof window.bibliotecaManager.getCoursesData === "function") {
            courses = window.bibliotecaManager.getCoursesData() || [];
          }
        } catch(e){/* ignore */}

        if (!Array.isArray(courses) || courses.length === 0) {
          try {
            if (Array.isArray(window.COURSES) && window.COURSES.length) {
              courses = window.COURSES;
            }
          } catch(e){/* ignore */}
        }

        if (!Array.isArray(courses) || courses.length === 0) {
          courses = SAMPLES;
        }

        const c = (slug && courses.find(x => (x.slug || x.id) === slug)) || null;

        if (!c) {
          text("courseTitle", "Curso n√£o encontrado");
          text("courseHeroTitle", "Curso n√£o encontrado");
          text("courseHeroSubtitle", "O curso solicitado n√£o foi localizado.");
          return;
        }

        // T√≠tulo / subt√≠tulo
        text("courseTitle", c.title);
        text("courseHeroTitle", c.title);
        text("courseHeroSubtitle", c.description || "");

        // Metas
        text("courseCategory", c.categoria || c.area || "");
        text("courseLevel", c.nivel || c.level || "");
        text("courseDuration", (c.cargaHoraria ? `${c.cargaHoraria}h` : (c.duracao || "")));

        // Sidebar / pre√ßo
        const priceNumber = (c.price != null && !Number.isNaN(Number(c.price))) ? Number(c.price) : null;
        text("coursePrice", priceNumber != null ? (priceNumber > 0 ? `R$ ${priceNumber.toFixed(2)}` : "Gratuito") : "");
        img("courseSidebarImage", c.thumbnail);

        // Instrutor
        text("instructorName", c.instructor || "Instrutor(a)");
        text("instructorProfileName", c.instructor || "Instrutor(a)");
        text("instructorProfileBio", c.instructorBio || "Informa√ß√µes em breve.");
        img("instructorAvatar", c.instructorAvatar);
        img("instructorProfileAvatar", c.instructorAvatar);

        // Conte√∫do
        const ul = document.getElementById("courseContentList");
        if (ul) {
          const items = Array.isArray(c.content) && c.content.length ? c.content : ["Conte√∫do program√°tico em breve."];
          ul.innerHTML = items.map(i => `<li>${String(i)}</li>`).join("");
        }

        // Abas
        document.querySelectorAll(".tab-button").forEach(btn => {
          btn.addEventListener("click", () => {
            document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".tab-content").forEach(tc => tc.classList.remove("active"));
            btn.classList.add("active");
            const id = `tab-${btn.dataset.tab}`;
            const panel = document.getElementById(id);
            if (panel) panel.classList.add("active");
          });
        });
      });
    })();
  </script>
</body>
</html>
